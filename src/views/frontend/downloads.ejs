<%- contentFor('body') %>
    <section class="relative">
        <picture class="block w-full h-full">
            <source media="(min-width: 1024px)" srcset="../images/desktop/download_desktop.png">
            <source media="(min-width: 640px)" srcset="../images/tablet/download_tablet.png">
            <img class="w-full h-full object-cover" src="../images/mobile/download_mobile.png" alt="響應式圖片">
        </picture>
        <div class="absolute inset-0 flex flex-col justify-center px-6 sm:px-16 lg:px-32">
            <h1 class="h2 text-white"><%= title %></h1>
            <p class="text-white">/ <%= currentLanguage==='en' ? 'Home' : '首頁' %> - <%= title %> /</p>
        </div>
    </section>

    <!-- Divider -->
    <div class="w-screen relative" style="left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw;">
        <hr class="border-t-2 border-gray-200 mb-16">
    </div>

    <!-- Download categories -->
    <section id="aboutplatform" class="px-6 pb-8 sm:px-16 sm:pb-16 lg:px-32">
        <div class="bg-custom-lightblue rounded-3xl border border-custom-green px-4 py-8 mb-12 sm:px-16">
            <h2 class="h4 text-center mb-4 sm:mb-12 text-custom-blue"><%= language === 'en' ? 'Download Categories' : '下載分類' %></h2>

            <div class="bg-white p-2 mb-4 relative rounded-xl border">
                <form action="/<%= language %>/downloads" method="GET" class="flex gap-2">
                <label for="category" class="w-14"><%= language === 'en' ? 'Category' : '分類' %></label>
                <select id="category" name="category"
                    class="w-full  text-gray-600 border-0 focus:ring-0 focus:outline-none py-2 pl-2 pr-10 appearance-none">
                    <option value=""><%= language === 'tw' ? '全部分類' : 'All Categories' %></option>
                    <% categories.forEach(function(category) { %>
                        <option value="<%= category.id %>"
                            <%=filters.category===category.id.toString() ? 'selected' : '' %>>
                            <%= category.name %>
                        </option>
                        <% }); %>
                </select>
                <button class="absolute right-10 top-5" type="submit"><%= language === 'en' ? 'Filter' : '篩選' %></button>
                </form>
                <!-- 自定義下拉箭頭 -->
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="relative">
                <form action="/downloads" method="GET" class="flex gap-2">
                    <label for="search" class="w-14"><%= language === 'en' ? 'Search' : '搜尋' %></label>
                    <input type="text" id="search" name="search" placeholder="<%= language === 'tw' ? '搜尋下載項目...' : 'Search downloads...' %>" value="<%= filters.search %>"
                        class="w-full px-4 py-4 border rounded-xl">
                    <button class="absolute right-3 top-4" type="submit">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" alt="<%= language === 'en' ? 'Search' : '搜尋' %>">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Download List -->
    <% if (locals.downloads && downloads.length> 0) { %>
    <section id="downloadList" class="px-6 pb-8 sm:px-16 sm:pb-16 lg:px-32">
        <% downloads.forEach(function(download) { %>
        <!-- File 1 -->
        <div>
            <h3 class="h5 mb-6"><%= download.title %></h3>
            <!-- 橫幅卡片 -->
            <div class="bg-gray-100 rounded-2xl">
                <div class="flex items-center justify-between px-6 py-2">
                    <!-- 標題部分 -->
                    <p class=""><%= download.description %></p>
                    
                    <!-- 下載按鈕部分 -->
                    <a href="/<%= language %>/downloads/<%= download.id %>" class="inline-flex items-center px-0 sm:px-5 py-0">
                        <img src="../images/downloadcloud.png" alt="下載雲" class="h-8 mr-0 sm:mr-2 object-contain">
                        <span class="hidden sm:block"><%= language === 'en' ? 'Download' : '檔案下載' %></span>
                    </a>
                </div>
            </div>
        </div>
        <!-- Divider -->
        <div class="my-8">
            <hr class="border-t-2 border-gray-200">
        </div>
        
        <% }); %>
    </section>
    <% } %>