<%- contentFor('body') %>

    <% if (banners && banners.length> 0) { %>
        <!-- Banner Carousel -->
        <div class="relative w-full overflow-hidden bg-gray-100 mb-8" style="height: 400px;">
            <!-- Banner Container -->
            <div id="banner-carousel" class="relative w-full h-full">
                <% banners.forEach((banner, index)=> { %>
                    <div class="banner-slide absolute inset-0 w-full h-full"
                        style="display: <%= index === 0 ? 'block' : 'none' %>;" data-index="<%= index %>">
                        <% if (banner.mediaType==='image' ) { %>
                            <% if (banner.url) { %>
                                <a href="<%= banner.url %>" target="_blank" rel="noopener noreferrer"
                                    class="block w-full h-full">
                                    <img src="<%= banner.mediaPath %>" alt="<%= banner.title %>"
                                        class="w-full h-full object-cover">
                                </a>
                                <% } else { %>
                                    <img src="<%= banner.mediaPath %>" alt="<%= banner.title %>"
                                        class="w-full h-full object-cover">
                                    <% } %>
                                        <% } else if (banner.mediaType==='video' ) { %>
                                            <video id="video-<%= index %>" autoplay muted loop playsinline
                                                class="w-full h-full object-cover">
                                                <source src="<%= banner.mediaPath %>" type="video/mp4">
                                                Your browser does not support the video tag.
                                            </video>
                                            <% } %>
                                                <div
                                                    class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white p-4">
                                                    <h2 class="text-xl font-bold">
                                                        <%= banner.title %>
                                                    </h2>
                                                    <% if (banner.description) { %>
                                                        <p class="mt-2">
                                                            <%= banner.description %>
                                                        </p>
                                                        <% } %>
                                                            <% if (banner.url && banner.mediaType !=='image' ) { %>
                                                                <a href="<%= banner.url %>" target="_blank"
                                                                    rel="noopener noreferrer"
                                                                    class="inline-block mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Learn
                                                                    More</a>
                                                                <% } %>
                                                </div>
                    </div>
                    <% }); %>

                        <% if (banners.length> 1) { %>
                            <!-- Navigation Arrows -->
                            <a href="#" id="prev-banner"
                                class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-70 text-white p-3 rounded-full z-20 hover:bg-opacity-90 focus:outline-none cursor-pointer"
                                style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 19l-7-7 7-7" />
                                </svg>
                            </a>
                            <a href="#" id="next-banner"
                                class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-70 text-white p-3 rounded-full z-20 hover:bg-opacity-90 focus:outline-none cursor-pointer"
                                style="width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 5l7 7-7 7" />
                                </svg>
                            </a>

                            <!-- Indicators -->
                            <div class="absolute bottom-20 left-0 right-0 flex justify-center space-x-3 z-20">
                                <% banners.forEach((_, index)=> { %>
                                    <a href="#"
                                        class="banner-indicator h-4 w-4 rounded-full <%= index === 0 ? 'bg-white' : 'bg-gray-400' %> hover:bg-white focus:outline-none cursor-pointer"
                                        data-index="<%= index %>"></a>
                                    <% }); %>
                            </div>
                            <% } %>
            </div>
        </div>

        <!-- Banner Carousel Script -->
        <script>
            // Wait for the DOM to be fully loaded
            document.addEventListener('DOMContentLoaded', function () {
                // Get all the elements we need
                var slides = document.querySelectorAll('.banner-slide');
                var prevButton = document.getElementById('prev-banner');
                var nextButton = document.getElementById('next-banner');
                var indicators = document.querySelectorAll('.banner-indicator');

                // Only proceed if we have multiple slides
                if (slides.length <= 1) return;

                console.log('Carousel initialized with', slides.length, 'slides');

                var currentIndex = 0;
                var interval;

                // Function to show a specific slide
                function showSlide(index) {
                    console.log('Showing slide', index);

                    // Hide all slides
                    for (var i = 0; i < slides.length; i++) {
                        slides[i].style.display = 'none';
                    }

                    // Show the selected slide
                    slides[index].style.display = 'block';

                    // Update indicators
                    for (var j = 0; j < indicators.length; j++) {
                        indicators[j].classList.remove('bg-white');
                        indicators[j].classList.add('bg-gray-400');
                    }

                    indicators[index].classList.remove('bg-gray-400');
                    indicators[index].classList.add('bg-white');

                    // Pause all videos
                    var videos = document.querySelectorAll('.banner-slide video');
                    for (var k = 0; k < videos.length; k++) {
                        videos[k].pause();
                    }

                    // Play video if current slide has one
                    var currentVideo = slides[index].querySelector('video');
                    if (currentVideo) {
                        currentVideo.play();
                    }

                    currentIndex = index;
                }

                // Function to show the previous slide
                function showPrevSlide() {
                    clearInterval(interval);
                    var prevIndex = (currentIndex - 1 + slides.length) % slides.length;
                    showSlide(prevIndex);
                    startAutoRotation();
                }

                // Function to show the next slide
                function showNextSlide() {
                    clearInterval(interval);
                    var nextIndex = (currentIndex + 1) % slides.length;
                    showSlide(nextIndex);
                    startAutoRotation();
                }

                // Function to start automatic rotation
                function startAutoRotation() {
                    interval = setInterval(function () {
                        var nextIndex = (currentIndex + 1) % slides.length;
                        showSlide(nextIndex);
                    }, 6000);
                }

                // Add event listeners to the previous and next buttons
                if (prevButton) {
                    prevButton.addEventListener('click', function (e) {
                        e.preventDefault();
                        console.log('Previous button clicked');
                        showPrevSlide();
                        return false;
                    });
                }

                if (nextButton) {
                    nextButton.addEventListener('click', function (e) {
                        e.preventDefault();
                        console.log('Next button clicked');
                        showNextSlide();
                        return false;
                    });
                }

                // Add event listeners to the indicators
                for (var l = 0; l < indicators.length; l++) {
                    (function (index) {
                        indicators[index].addEventListener('click', function (e) {
                            e.preventDefault();
                            console.log('Indicator', index, 'clicked');
                            clearInterval(interval);
                            showSlide(index);
                            startAutoRotation();
                            return false;
                        });
                    })(l);
                }

                // Start automatic rotation
                startAutoRotation();
            });
        </script>
        <% } %>

            <div class="container mx-auto px-4 py-8">
                <!-- Welcome Section -->
                <div class="text-center mb-12">
                    <h1 class="text-3xl font-bold mb-4">
                        <%= currentLanguage==='en' ? 'Welcome to Our Website' : '歡迎來到我們的網站' %>
                    </h1>
                    <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                        <%= currentLanguage==='en' ? 'Discover our latest updates, news, and promotions.'
                            : '探索我們最新的更新、最新消息和推動方案。' %>
                    </p>
                </div>

                <!-- Featured Content Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                    <!-- News Card -->
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="h-48 bg-blue-100 flex items-center justify-center">
                            <svg class="w-16 h-16 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z">
                                </path>
                            </svg>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">
                                <%= currentLanguage==='en' ? 'Latest News' : '最新消息' %>
                            </h3>
                            <p class="text-gray-600 mb-4">
                                <%= currentLanguage==='en' ? 'Stay updated with our latest news and announcements.'
                                    : '了解我們最新的最新消息和公告。' %>
                            </p>
                            <a href="/<%= currentLanguage %>/news"
                                class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">
                                <%= currentLanguage==='en' ? 'View News' : '查看最新消息' %>
                            </a>
                        </div>
                    </div>

                    <!-- Promotions Card -->
                    <!-- <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="h-48 bg-green-100 flex items-center justify-center">
                            <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7">
                                </path>
                            </svg>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">
                                <%= currentLanguage==='en' ? 'Special Promotions' : '特別促銷' %>
                            </h3>
                            <p class="text-gray-600 mb-4">
                                <%= currentLanguage==='en' ? 'Check out our current promotions and special offers.'
                                    : '查看我們當前的促銷和特別優惠。' %>
                            </p>
                            <a href="/<%= currentLanguage %>/promotions"
                                class="inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors">
                                <%= currentLanguage==='en' ? 'View Promotions' : '查看促銷' %>
                            </a>
                        </div>
                    </div> -->

                    <!-- FAQ Card -->
                    <!-- <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="h-48 bg-purple-100 flex items-center justify-center">
                            <svg class="w-16 h-16 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z">
                                </path>
                            </svg>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-semibold mb-2">
                                <%= currentLanguage==='en' ? 'Frequently Asked Questions' : '常見問題' %>
                            </h3>
                            <p class="text-gray-600 mb-4">
                                <%= currentLanguage==='en' ? 'Find answers to commonly asked questions.' : '找到常見問題的答案。'
                                    %>
                            </p>
                            <a href="/<%= currentLanguage %>/faq"
                                class="inline-block px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors">
                                <%= currentLanguage==='en' ? 'View FAQ' : '查看常見問題' %>
                            </a>
                        </div>
                    </div> -->
                </div>
            </div>

            <!-- Related Links Section -->
            <% if (links && links.length> 0) { %>
                <div class="container mx-auto px-4 py-8 mb-12">
                    <div class="max-w-6xl mx-auto">
                        <h2 class="text-2xl font-bold mb-6 text-center">
                            <%= currentLanguage==='en' ? 'Related Links' : '相關連結' %>
                        </h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <% links.forEach(function(link) { %>
                                <a href="<%= link.url %>" target="_blank" rel="noopener noreferrer" class="block group">
                                    <div
                                        class="bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 transform hover:-translate-y-1 hover:shadow-lg">
                                        <% if (link.image) { %>
                                            <div class="h-40 overflow-hidden">
                                                <img src="<%= link.image %>"
                                                    alt="<%= currentLanguage==='en' ? link.title_en : link.title_tw %>"
                                                    class="w-full h-full object-cover transition-transform duration-500 transform group-hover:scale-105">
                                            </div>
                                            <% } else { %>
                                                <div class="h-40 bg-gray-200 flex items-center justify-center">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24"
                                                        stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                            stroke-width="2"
                                                            d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1">
                                                        </path>
                                                    </svg>
                                                </div>
                                                <% } %>
                                                    <div class="p-4">
                                                        <h3
                                                            class="text-lg font-semibold text-gray-800 mb-2 group-hover:text-blue-600">
                                                            <%= currentLanguage==='en' ? link.title_en : link.title_tw
                                                                %>
                                                        </h3>
                                                        <div class="flex items-center text-gray-600 text-sm">
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1"
                                                                fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                                    stroke-width="2"
                                                                    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                                                                </path>
                                                            </svg>
                                                            <%= currentLanguage==='en' ? 'Visit Link' : '訪問連結' %>
                                                        </div>
                                                    </div>
                                    </div>
                                </a>
                                <% }); %>
                        </div>
                    </div>
                </div>
                <% } %>