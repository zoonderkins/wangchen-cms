<%- contentFor('body') %>

<div class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6"><%= page.title %></h1>
        
        <div class="bg-white shadow-md rounded-lg p-6 mb-8">
            <!-- Page Content -->
            <div class="prose max-w-none">
                <%- page.content %>
            </div>
        </div>
        
        <% if (page.attachments && page.attachments.length > 0) { %>
            <!-- Attachments Section -->
            <div class="mt-8">
                <h2 class="text-2xl font-semibold mb-4">Attachments</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <% page.attachments.forEach(attachment => { %>
                        <div class="border rounded-lg p-4 flex items-center">
                            <% if (attachment.mimeType.startsWith('image/')) { %>
                                <div class="w-16 h-16 mr-4 flex-shrink-0">
                                    <img src="<%= attachment.path %>" alt="<%= attachment.originalName %>" class="w-full h-full object-cover rounded">
                                </div>
                            <% } else if (attachment.mimeType.startsWith('video/')) { %>
                                <div class="w-16 h-16 bg-gray-200 flex items-center justify-center mr-4 flex-shrink-0 rounded">
                                    <svg class="w-8 h-8 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm12.553 1.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"></path>
                                    </svg>
                                </div>
                            <% } else if (attachment.mimeType === 'application/pdf') { %>
                                <div class="w-16 h-16 bg-gray-200 flex items-center justify-center mr-4 flex-shrink-0 rounded">
                                    <svg class="w-8 h-8 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            <% } else if (attachment.mimeType.includes('word') || attachment.mimeType.includes('document')) { %>
                                <div class="w-16 h-16 bg-gray-200 flex items-center justify-center mr-4 flex-shrink-0 rounded">
                                    <svg class="w-8 h-8 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            <% } else if (attachment.mimeType.includes('excel') || attachment.mimeType.includes('spreadsheet')) { %>
                                <div class="w-16 h-16 bg-gray-200 flex items-center justify-center mr-4 flex-shrink-0 rounded">
                                    <svg class="w-8 h-8 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            <% } else { %>
                                <div class="w-16 h-16 bg-gray-200 flex items-center justify-center mr-4 flex-shrink-0 rounded">
                                    <svg class="w-8 h-8 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            <% } %>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium text-gray-900 truncate">
                                    <%= attachment.originalName %>
                                </p>
                                <p class="text-xs text-gray-500">
                                    <%= (attachment.size / 1024).toFixed(2) %> KB
                                </p>
                                <a href="<%= attachment.path %>" target="_blank" class="inline-block mt-2 text-sm text-blue-600 hover:underline">
                                    <% if (attachment.mimeType.startsWith('image/')) { %>
                                        View Image
                                    <% } else if (attachment.mimeType.startsWith('video/')) { %>
                                        Watch Video
                                    <% } else { %>
                                        Download File
                                    <% } %>
                                </a>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>
        <% } %>
        
        <div class="mt-8 text-sm text-gray-500">
            <p>Published: <%= new Date(page.publishedAt || page.createdAt).toLocaleDateString() %></p>
            <p>Last updated: <%= new Date(page.updatedAt).toLocaleDateString() %></p>
        </div>
    </div>
</div>

<%- contentFor('head') %>
<% if (page.metaTitle) { %>
<title><%= page.metaTitle %></title>
<% } %>
<% if (page.metaDescription) { %>
<meta name="description" content="<%= page.metaDescription %>">
<% } %>
<% if (page.metaKeywords) { %>
<meta name="keywords" content="<%= page.metaKeywords %>">
<% } %>
<!-- Include Quill CSS for proper rendering of content -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<style>
    /* Add any page-specific styles here */
    .prose {
        max-width: 65ch;
        color: #374151;
    }
    .prose p {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
    }
    .prose h1 {
        font-size: 2.25em;
        margin-top: 0;
        margin-bottom: 0.8888889em;
        line-height: 1.1111111;
    }
    .prose h2 {
        font-size: 1.5em;
        margin-top: 2em;
        margin-bottom: 1em;
        line-height: 1.3333333;
    }
    .prose h3 {
        font-size: 1.25em;
        margin-top: 1.6em;
        margin-bottom: 0.6em;
        line-height: 1.6;
    }
    .prose ul {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
        list-style-type: disc;
        padding-left: 1.625em;
    }
    .prose ol {
        margin-top: 1.25em;
        margin-bottom: 1.25em;
        list-style-type: decimal;
        padding-left: 1.625em;
    }
    .prose a {
        color: #2563eb;
        text-decoration: underline;
        font-weight: 500;
    }
    .prose img {
        margin-top: 2em;
        margin-bottom: 2em;
    }
    .prose blockquote {
        font-weight: 500;
        font-style: italic;
        color: #111827;
        border-left-width: 0.25rem;
        border-left-color: #e5e7eb;
        quotes: "\201C""\201D""\2018""\2019";
        margin-top: 1.6em;
        margin-bottom: 1.6em;
        padding-left: 1em;
    }
    
    /* Quill specific styles */
    .ql-align-center {
        text-align: center;
    }
    .ql-align-right {
        text-align: right;
    }
    .ql-align-justify {
        text-align: justify;
    }
    .ql-indent-1 {
        padding-left: 3em;
    }
    .ql-indent-2 {
        padding-left: 6em;
    }
    .ql-indent-3 {
        padding-left: 9em;
    }
    .ql-indent-4 {
        padding-left: 12em;
    }
    .ql-indent-5 {
        padding-left: 15em;
    }
    .ql-indent-6 {
        padding-left: 18em;
    }
    .ql-indent-7 {
        padding-left: 21em;
    }
    .ql-indent-8 {
        padding-left: 24em;
    }
    .ql-size-small {
        font-size: 0.75em;
    }
    .ql-size-large {
        font-size: 1.5em;
    }
    .ql-size-huge {
        font-size: 2.5em;
    }
    .ql-bg-black {
        background-color: #000;
    }
    .ql-bg-red {
        background-color: #e60000;
    }
    .ql-bg-orange {
        background-color: #f90;
    }
    .ql-bg-yellow {
        background-color: #ff0;
    }
    .ql-bg-green {
        background-color: #008a00;
    }
    .ql-bg-blue {
        background-color: #06c;
    }
    .ql-bg-purple {
        background-color: #93f;
    }
    .ql-color-white {
        color: #fff;
    }
    .ql-color-red {
        color: #e60000;
    }
    .ql-color-orange {
        color: #f90;
    }
    .ql-color-yellow {
        color: #ff0;
    }
    .ql-color-green {
        color: #008a00;
    }
    .ql-color-blue {
        color: #06c;
    }
    .ql-color-purple {
        color: #93f;
    }
</style>
